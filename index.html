<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>必中 v2 - 智能預測系統</title>
<style>
:root {
  --primary: #00ff99;
  --secondary: #274c77;
  --danger: #ff6666;
  --warning: #ffcc00;
  --bg-0: #050b15;
  --bg-1: #0f1f38;
  --bg-2: #142b4d;
  --bg-3: #1a355c;
  --bg-4: #203f6e;
  --text-light: #e0f7ff;
}

/* ...（保持原有CSS不變）... */

</style>
</head>
<body>

<div class="container">
  <!-- Header -->
  <div class="header">
    <h1>必中 v2</h1>
    <div class="subtitle">智能預測分析系統 | 基於歷史數據的多維度分析</div>
  </div>

  <!-- Panel 1：數據導入 -->
  <div class="panel panel-1">
    <h2>📊 數據導入層</h2>
    <input type="file" id="csvInput" class="file-input" accept=".csv">
    <div id="csvInfo" class="status"></div>
    <div class="stats-row" id="basicStats" style="display: none;"></div>
  </div>

  <!-- Panel A：智能分析 -->
  <div class="panel panel-2">
    <h2>🔍 智能分析層</h2>
    <button class="btn btn-primary" onclick="runAnalysis()">執行深度分析</button>
    <div class="loading" id="loadingA">
      <div class="spinner"></div>
      <div>正在分析數據...</div>
    </div>
    <div id="panelA" style="display: none;">
      <!-- 分析結果將動態插入 -->
    </div>
  </div>

  <!-- Panel B：組合驗證 -->
  <div class="panel panel-3">
    <h2>✅ 組合驗證層</h2>
    <input type="text" id="verifyInput" class="text-input" placeholder="輸入驗證組合，例如：1 2 16 33 35">
    <button class="btn" onclick="runVerify()">分析組合</button>
    <div id="panelB" style="display: none;">
      <!-- 驗證結果將動態插入 -->
    </div>
  </div>

  <!-- Panel C：預測生成 -->
  <div class="panel panel-4">
    <h2>🎯 預測生成層</h2>
    <button class="btn btn-primary" onclick="generatePrediction()">生成預測組合</button>
    <div class="loading" id="loadingC">
      <div class="spinner"></div>
      <div>正在生成預測...</div>
    </div>
    <div id="panelC" style="display: none;">
      <!-- 預測結果將動態插入 -->
    </div>
  </div>

  <!-- Panel D：預測邏輯說明 -->
  <div class="panel panel-0">
    <h2 id="toggleLogic" style="cursor: pointer;">🧠 預測邏輯說明（點擊展開/收合）</h2>
    <div id="logicContent" style="display: none;">
      <p>此系統的預測組合生成基於歷史數據，遵循以下概念：</p>
      <ul>
        <li>分析歷史開獎資料，統計每個號碼的出現頻率、遺漏期數、和值及奇偶比。</li>
        <li>為每個號碼計算綜合評分：中頻號碼、中等遺漏期號碼、奇偶偏好會加分。</li>
        <li>從高分號碼中挑選 5 個，並套用約束條件：
          <ul>
            <li>奇偶平衡：奇數數量接近歷史平均。</li>
            <li>跨度約束：避免號碼過於集中。</li>
            <li>和值約束：組合總和接近歷史平均和值。</li>
          </ul>
        </li>
        <li>若規則過嚴，會補齊號碼以保證生成完整組合。</li>
      </ul>
      <p>整體策略是一種「模擬歷史常態的啟發式生成」，輸出的組合符合歷史統計特徵，但不保證未來中獎結果。</p>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>⚠️ 免責聲明：本系統僅供娛樂參考，不具任何預測保證功能</p>
    <p>彩票開獎為隨機事件，請理性參與，量力而行</p>
  </div>
</div>

<script>
// ...（保持原有JS不變）...

// Panel D 點擊收合功能
document.getElementById('toggleLogic').addEventListener('click', function() {
  const content = document.getElementById('logicContent');
  if (content.style.display === 'none') {
    content.style.display = 'block';
  } else {
    content.style.display = 'none';
  }
});
</script>
</body>
</html>
