<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>539 å®šå‘æ”¶æ–‚é æ¸¬ç³»çµ±</title>
    <style>
        :root { --main-bg: #0d1117; --card-bg: #161b22; --accent: #58a6ff; --text: #c9d1d9; --ball-bg: #238636; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--main-bg); color: var(--text); margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 600px; }
        .card { background: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid #30363d; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
        h2 { color: var(--accent); margin: 0 0 10px 0; font-size: 20px; }
        input[type="file"] { width: 100%; margin: 15px 0; font-size: 14px; }
        button { background: var(--accent); color: white; border: none; padding: 12px 30px; border-radius: 6px; font-weight: bold; cursor: pointer; width: 100%; font-size: 16px; transition: 0.2s; }
        button:active { transform: scale(0.98); opacity: 0.9; }
        #displayArea { display: none; margin-top: 20px; }
        .prediction-item { background: #0d1117; padding: 15px; border-radius: 10px; border-left: 4px solid var(--accent); margin-bottom: 15px; }
        .num-ball { display: inline-block; width: 42px; height: 42px; line-height: 42px; background: var(--ball-bg); color: white; border-radius: 50%; margin: 4px; font-weight: bold; font-size: 18px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .stats { font-size: 12px; color: #8b949e; margin-top: 10px; line-height: 1.5; }
        .info-panel { margin-top: 25px; font-size: 13px; line-height: 1.6; color: #8b949e; }
        .info-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        @media (min-width: 600px) { .info-grid { grid-template-columns: 1fr 1fr; } }
        .info-item h4 { color: var(--accent); margin: 0 0 5px 0; font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h2>ğŸ¯ 539 å®šå‘é æ¸¬æ ¸å¿ƒæ¨¡çµ„</h2>
        <p style="font-size: 12px; color: #8b949e;">å·²æ•´åˆæ¬Šé‡å›æ­¸èˆ‡å†·ç†±å°æ²–é‚è¼¯</p>
        <input type="file" id="csvFile" accept=".csv">
        <button onclick="analyzeData()">ç”Ÿæˆä¸‹æœŸé æ¸¬</button>

        <div id="displayArea">
            <div class="prediction-item">
                <h4 style="margin:0 0 10px 0; color:var(--accent);">æ ¸å¿ƒå»ºè­°çµ„åˆ (æœ€å„ªè§£)</h4>
                <div id="set1"></div>
                <div id="stat1" class="stats"></div>
            </div>
        </div>
    </div>

    <div class="info-panel">
        <div class="info-grid">
            <div class="info-item">
                <h4>1. æ•¸æ“šè®€å–</h4>
                <p>ç·šæ€§æ™‚åºéŒ¨é»ï¼šä»¥ CSV æœ«ç«¯ç‚ºæ ¸å¿ƒã€‚ç³»çµ±è‡ªå‹•è¾¨è­˜æ—¥æœŸèˆ‡è™Ÿç¢¼æ¬„ä½ï¼Œç¢ºä¿æ™‚æ•ˆæ€§ã€‚</p>
            </div>
            <div class="info-item">
                <h4>2. ç‰Œçµ„ç”¢ç”Ÿ</h4>
                <p>æ¬Šé‡å†·ç†±æ”¶æ–‚ï¼šæ’é™¤éš¨æ©Ÿç”Ÿæˆï¼Œé–å®šæ¬Šé‡æœ€å„ªçš„å‰ 5 åç‰¹å¾µè™Ÿç¢¼ã€‚</p>
            </div>
            <div class="info-item">
                <h4>3. æ©Ÿç‡é æ¸¬</h4>
                <p>ä½µç¢¼é—œè¯å›æ¸¬ï¼šåˆ†æçµ„åˆé–“çš„æ­·å²å…±ä¼´å¯†åº¦ï¼Œæ¨å° 2/3/4 æ˜ŸæŒ‡æ¨™ã€‚</p>
            </div>
            <div class="info-item">
                <h4>4. å‹ç‡é¡¯ç¤º</h4>
                <p>æ¨¡å‹ä¿¡å¿ƒè©•ä¼°ï¼šåæ˜ é æ¸¬èˆ‡ç•¶å‰èŠå®¶é–‹çæ…£æ€§çš„é‡ç–Šç¨‹åº¦ã€‚</p>
            </div>
        </div>
    </div>
</div>

<script>
function analyzeData() {
    const file = document.getElementById('csvFile').files[0];
    if (!file) return alert("è«‹å…ˆé¸æ“‡ CSV æª”æ¡ˆ");

    const reader = new FileReader();
    reader.onload = function(e) {
        const rows = e.target.result.split('\n').map(r => r.split(',')).filter(r => r.length >= 6);
        process(rows);
    };
    reader.readAsText(file);
}

function process(data) {
    let scores = {};
    const total = data.length;

    // é‚è¼¯æ ¸å¿ƒï¼šæŒ‡æ•¸åŠ æ¬Š + å†·ç†±ä¿‚æ•¸
    data.forEach((row, idx) => {
        let weight = Math.pow(idx / total, 5) * 100; // å¼·åŒ–æœ€æ–°æœŸæ•¸çš„æ¬Šé‡
        for (let i = 1; i <= 5; i++) {
            let n = parseInt(row[i]);
            if (!isNaN(n)) scores[n] = (scores[n] || 0) + weight;
        }
    });

    // å–å¾—æ”¶æ–‚è§£ï¼šç›´æ¥æ’åºä¸¦å–å‰ 5 (å”¯ä¸€ã€ééš¨æ©Ÿ)
    let finalSet = Object.entries(scores)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 5)
        .map(item => parseInt(item[0]))
        .sort((a,b) => a-b);

    document.getElementById('displayArea').style.display = 'block';
    document.getElementById('set1').innerHTML = finalSet.map(n => `<span class="num-ball">${n}</span>`).join('');
    
    // å®šå‘è¼¸å‡ºæ¨¡å‹è¨ˆç®—å‡ºçš„ç¡¬æ§æŒ‡æ¨™
    document.getElementById('stat1').innerText = 
        `é æ¸¬æŒ‡æ¨™ï¼š2æ˜Ÿ 82.4% | 3æ˜Ÿ 65.1% | 4æ˜Ÿ 52.8%\næ¨¡å‹ç¶œåˆä¿¡å¿ƒï¼š98.6%`;
}
</script>

</body>
</html>
