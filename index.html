<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>539 數據產生器</title>
    <style>
        :root { --primary: #d32f2f; --bg: #f4f4f9; }
        body { font-family: sans-serif; margin: 0; background: var(--bg); display: flex; flex-direction: column; align-items: center; }
        
        /* 置頂 Panel */
        .top-panel { width: 100%; background: #333; color: white; padding: 15px; display: flex; justify-content: center; align-items: center; gap: 15px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .top-panel input[type="file"] { font-size: 0.9rem; }

        /* 主內容區 */
        .main { margin-top: 40px; background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 500px; }
        button { padding: 10px 25px; font-size: 1rem; cursor: pointer; background: var(--primary); color: white; border: none; border-radius: 5px; font-weight: bold; }
        
        /* 號碼球樣式 */
        .result { margin-top: 25px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .ball { width: 45px; height: 45px; line-height: 45px; background: #ffc107; border-radius: 50%; font-weight: bold; border: 2px solid #ffa000; font-size: 1.2rem; }
        
        /* 檔案資訊 */
        #file-info { font-size: 0.85rem; color: #ccc; margin-top: 5px; }
    </style>
</head>
<body>

<div class="top-panel">
    <span>數據上傳 (CSV):</span>
    <input type="file" id="csvFile" accept=".csv" onchange="handleFile()">
    <div id="file-info">未選取檔案</div>
</div>

<div class="main">
    <h2>今彩 539 產生器</h2>
    <p>點擊下方按鈕隨機產生一組號碼</p>
    <button onclick="generateNumbers()">產生號碼</button>
    <div class="result" id="result"></div>
</div>

<script>
    let csvData = [];

    // 處理檔案上傳
    function handleFile() {
        const fileInput = document.getElementById('csvFile');
        const info = document.getElementById('file-info');
        const file = fileInput.files[0];

        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const text = e.target.result;
                csvData = text.split('\n').map(row => row.split(','));
                info.innerText = `已讀取: ${file.name} (${csvData.length} 列)`;
                console.log("數據已載入:", csvData);
            };
            reader.readAsText(file);
        }
    }

    // 產生號碼邏輯
    function generateNumbers() {
        const numbers = [];
        while(numbers.length < 5) {
            const r = Math.floor(Math.random() * 39) + 1;
            if(!numbers.includes(r)) numbers.push(r);
        }
        
        numbers.sort((a, b) => a - b);
        
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = '';
        numbers.forEach(num => {
            const ball = document.createElement('div');
            ball.className = 'ball';
            ball.innerText = num < 10 ? '0' + num : num;
            resultDiv.appendChild(ball);
        });
    }
</script>

</body>
</html>
